目录
1 实训概况	1
1.1 实训时间	1
1.2 实训目的	1
1.3实训环境	1
1.4实训内容	1
2 需求分析	3
2.1 功能模块	3
2.1.1 管理员功能需求分析	3
2.1.2 用户功能需求分析	3
2.2 可行性分析	4
2.2.1 技术可行性	4
2.2.2 经济可行性	4[课设报告.docx](https://github.com/cxjie/-/files/8494006/default.docx)

2.2.3 操作可行性	4
2.2.4 社会可行性	5
2.2.5 安全可行性	5
3 系统设计	5
3.1 总体设计	5
3.2 业务流程设计	5
3.2.1 管理员的业务流程设计	5
3.2.2 用户的业务流程设计	6
3.3 数据库设计	6
3.3.1 E-R模型	6
3.3.2 逻辑结构设计	10
3.3.3 数据库实施	11
3.4 用例设计	14
4 系统实现	15
4.1后台分类管理	15
4.1.1 添加分类	15
4.1.2 删除分类	16
4.1.3 修改分类	16
4.2 后台商品管理	17
4.2.1 发布商品	17
4.2.2 删除商品	18
4.2.3 修改商品	18
4.2.4 查询商品	19
4.3 前台商品功能模块	20
4.3.1 商品列表	20
4.3.2 商品详情	21
4.3.3 搜索商品	21
4.3.4 商品排序	22
4.4 添加购物车	22
4.5 订单模块	22
4.6 地址模块	23
4.7 添加过滤器	23
4.7.1 权限过滤	23
4.7.2 中文乱码过滤	23
4.8 注册后发邮件	23
5系统测试	24
5.1添加功能测试	24
5.2 删除功能测试	25
5.3 修改功能测试	26
5.4 查询功能测试	27
5.5 排序功能测试	27
5.6 注册激活测试	27
6 实训总结	29
7 参考文献	30


1 实训概况
1.1 实训时间
第9周－19周
1.2 实训目的
企业项目综合实训是计算机专业教学的一个重要环节，其目的是使学生在获得基本知识和基本技能的基础上，进行一次较全面、系统的训练，以巩固课堂所学知识及提高操作技能。旨在提升本专业学生对此课程中的理论知识的综合应用能力、逻辑思维能力和软件开发能力，培养学生独立工作和解决实际问题的能力，为学生走上毕业岗位作好充足准备。
网上购物是时下比较流行的消费方式，给人们的生活带来了极大的方便。本次实训要求学生用Java技术开发基于B/S架构的大型网上商城系统。通过真实的项目实战过程，让学生从实践中认识面向对象程序设计的开发思想和软件设计与开发的流程，能够用程序去解决现实生活问题，在一步一步的实践过程中不断提高程序设计的水平。
1.3实训环境
（1）硬件环境：
机房：计算机学院多媒体专业机房
电脑：双核高性能主机
网络：100Mbps校园网
（2）开发环境：
操作系统：Windows 10
开发工具：IntelliJ IEDA
容器：    Tomcat
中间件：  JDK
数据库：  MySQL
1.4实训内容
网上商城系统又称在线商城系统，是一个功能完善的在线购物系统，主要为在线销售和在线购物服务。其功能主要包含商品的管理、会员的管理、订单的管理、库存的管理、优惠的管理、在线支付等。
本次实训将由学生参考相关学习资料，用Java EE技术独立完成“网上商城系统”的设计与开发。系统技术架构可以采用Java EE的基础架构（如JSP+Servlet+DAO）,也可以采用Java EE领域流行的组合架构（如Spring MVC+Spring+MyBatis）。系统应至少包括PC端的Web应用服务器程序，根据能力也可以增加移动端的APP。
系统主要开发的功能如下：
（1）后台功能
商品模块：包括后台商品库存管理、上货、出货、编辑管理和商品分类管理、商品品牌管理等。 
订单模块：在线订单程序，使消费者能够顺利的通过Web在线的方式，直接生成购买订单。 
评论模块：购买过产品的买家可以对产品进行评价和打分。
支付模块：即通过网上钱包、电子支付卡。进行网上资金流转换的业务流程；国内主流支付方式包括：腾讯旗下的财付通、支付宝、网银在线等。
会员模块：在购物系统中，集成会员注册是吸引会员进行二次购买和提升转换率最好的方式。
信息模块：用于发布商城系统相关的一些信息。
配送模块：购物系统集成的物流配送方式，从而方便消费者对物流方式进行在线选择。如：EMS、顺风等等。
商品促销：购物系统都有商品促销功能，通过商品促销功能，能够迅速的促进商城的消费积极性。 
（2）前端功能
商品展示：通过前端界面，以标准的或者其他个性化的方式向用户展示商品各类信息，完成购物系统内信息流的传递。 
购物车：用户可对想要购买的商品进行网上订购，在购物过程中，随时增删商品。
模板风格自定义：即通过系统内置的模板引擎，可以方便的通过后台可视化编辑，设计出符合自身需求的风格界面。 
商品多图展示：随着电子商务的发展商品图片成为吸引消费者的第一要素，多图展示即提供前台多张图片的展示，从而提升消费者的购物欲望。 
自定义广告模块：内置在系统中的广告模块，网站管理员能够顺利的通过操作就可以在前端界面中添加各种广告图片。
2 需求分析
2.1 功能模块
2.1.1 管理员功能需求分析
管理员登录系统之后，要能够进行商品信息管理和商品分类的管理。对商品信息和商品分类进行增删改查。可以查看订单列表，对订单进行删除和查询。最后可以跳转到商城登录页面和退出系统。管理员的需求分析图如图2-1所示：

图2-1 管理员需求分析图
2.1.2 用户功能需求分析
用户可以进行注册登录和退出，查看和查询商品，查看商品详情，管理购物车，管理订单，进入个人中心。用户的需求分析图如图2-2所示：

图2-2 用户需求分析图
2.2 可行性分析
2.2.1 技术可行性
本系统后端语言采用java进行编写，所用的到工具为idea，运用mysql来存储数据，用可视化工具SQLyog来进行数据库表的创建，前端采用jsp编写，页面布局采用css和js来编写。所用到几乎都是学过并很熟悉的内容，其中java语言在写项目这方面，非常合适。SQLyog是一个免费且很好用的数据库管理工具，几乎每一个开发人员都会java语言和使用SQLyog工具。所以，在技术方面开发这样一个商城系统是可行的。
2.2.2 经济可行性
本系统是一个小型的购物商城，开发用到的软件属于破解版的，管理数据的可视化工具也是免费的，用到的java语言等也是开源的，所以并没有花费很多的经费，投入较多的是人力和时间。所以这个系统在经济上是可行的。
2.2.3 操作可行性
在这个互联网时代，几乎所有人都有过网上购物的经历，大家也都会使用电脑和手机上网。对于该系统，无论是在网页端还是软件端，用户只要连上网，就可以浏览商城的产品了；只要登录就可以进行收藏商品、添加购物车，管理个人信息，实现购物。因此，该系统的操作可行性是肯定的。
2.2.4 社会可行性
该系统为众多商家提供了出售商品的一个渠道，也为广大人民增加了一种购买商品的一种方式。可以说对于买卖双方都是有益的。每个人都可以成为商家，每个人都可以是顾客，对社会的积极意义是毋庸置疑的。因此，该系统在社会可行性上是可行的。
2.2.5 安全可行性
本系统对于用户的信息是严格保密的，用户在注册的时候，系统会通过MD5加密将密码转换为随机码存入数据库中，这个过程是不可逆转的。也就是说，只要没有密码，给人是无法破解出来用户的信息的。因此，在安全方面，该系统是可行的。
3 系统设计
3.1 总体设计
通过对整个系统的分析，这个系统共有管理员端和用户端，管理员端有登录和退出、商品信息管理、商品分类管理和订单管理。用户端有登录和退出、商品列表的显示、商品详情、购物车管理、订单管理和个人中心。其中，在注册时，密码的存储采用的是MD5加密算法，还要给用户发邮箱进行验证，管理订单时的地址选择功能，添加商品的图片上传功能。具体的系统功能设计如图3-1所示：

图3-1 系统功能模块图
3.2 业务流程设计
3.2.1 管理员的业务流程设计
在管理员端，管理员首先要登录系统，然后才能对商品、分类和订单进行管理，操作完之后退出系统。管理员的业务流程图如图3-2所示：

图3-2 管理员业务流程图
3.2.2 用户的业务流程设计
在用户端，用户可以进行浏览商品，如果要购买商品，需要进行登录，在登录时没有账号要去注册，注册后激活账号才能购买商品。购买商品的流程为：加入购物车—进入订单管理页面—结算。最后购买完了，可以退出系统。用户的业务流程图如图2-5所示。

图3-3 用户业务流程图
3.3 数据库设计
3.3.1 E-R模型
激活码的实体属性图如图3-4所示：

图3-4 激活码的实体属性图
地址的实体属性图如图3-5所示：

图3-5 地址的实体属性图
县城的实体属性图如图3-6所示：

图3-6 线程的实体属性图
商品分类的实体属性图如图3-7所示：

图3-7 商品分类的实体属性图
市区的实体属性图如图3-8所示：

图3-8 市区的实体属性图
订单条目的实体属性图如图3-9所示：

图3-9 订单条目的实体属性图
订单的实体属性图如图3-10所示：

图3-10 订单的实体属性图
商品的实体属性图如图3-11所示：

图3-11 商品的实体属性图
省份的实体属性图如图3-12所示：

图3-12 省份的实体属性图
用户的实体属性图如图3-13所示：

图3-13 订单的实体属性图
3.3.2 逻辑结构设计
（1）激活码（id，激活码，过期时间，所属会员）
其中id为主键
（2）地址（id，详细地址，省，市，区（县城），邮编，收货人，联系电话，所属会员id）
其中id为主键
（3）县（id，县城id，名称，所属市id）
其中id为主键
（4）商品分类（id，名称，排序号）
其中id为主键
（5）市（id，市区id，市区名称，所属省id）
其中id为主键
（6）订单条目（编号，购买数量，购买此商品的总价，购买商品的编号，商品名称，商品单价，商品封面，所属订单编号）
其中编号为主键
（7）订单（id，下单时间，订单状态，收货详细地址，邮编，收货人，电话号码，订单总价，备注，所属会员id）
其中id为主键
（8）商品（id，名称，实际价格，市场价格，库存量，浏览量，上架时间，封面，描述，所属分类id）
其中id为主键
（9）省（id，省份编号，省份名称）
其中id为主键
（10）用户（会员id，用户名，密码，性别，邮箱，头像，会员等级，找回密码时的问题，问题的答案，上次登录的时间，是否激活）
其中会员id为主键
3.3.3 数据库实施
如表3-1所示为激活码表，其中activateid为激活码id，code为激活码，expiredate为过期时间。
表3-1 激活码表
名称	类型	长度	允许空	是否为主键	备注
activateid	Int	11	否	是	激活码id
code	varchar	100	是	否	激活码
expiredate	datetime	—	是	否	过期时间
vipid	int	11	是	否	所属会员id
如表3-2所示为地址表，其中addressid为主键地址id，province为省份，city为市区，area为县区，addressname为收货详细地址，postcode为邮编，receiver为收货人，phone为联系电话，为所属会员id。
表3-2 地址表（address）
名称	类型	长度	允许空	是否为主键	备注
addressid	int	11	否	是	Id
province	varchar	50	是	否	省份
city	varchar	50	是	否	市
area	varchar	50	是	否	区
addressname	varchar	200	是	否	详细地址
postcode	varchar	32	是	否	邮编
receiver	varchar	50	是	否	收货人
phone	varchar	32	是	否	联系电话
vipid	int	11	是	否	所属会员id
如表3-3所示为县区表，其中id为主键id，areaid为县区id，area为县区名称，cityid为所属市id。
表3-3 县区表（areas）
名称	类型	长度	允许空	是否为主键	备注
id	int	11	否	是	Id
areaid	varchar	20	是	否	县区id
area	varchar	50	是	否	名称
cityid	varchar	20	是	否	所属市id
如表3-4所示为商品分类表，其中categoryid为分类id，name为分类名称，sort为分类排序号。
表3-4 商品分类表（category）
名称	类型	长度	允许空	是否为主键	备注
categoryid	int	11	否	是	分类id
name	varchar	50	是	否	分类名称
sort	int	11	是	否	分类排序号
如表3-5所示为市区表，其中id为主键id，cityid为市区id，city为市区名称，provinceid为所属省区id
表3-5 市区表（cities）
名称	类型	长度	允许空	是否为主键	备注
id	int	11	否	是	主键id
cityid	varchar	20	是	否	市区id
city	varchar	50	是	否	市区名称
provinceid	varchar	20	是	否	所属省区id
如表3-6所示为订单条目表，其中id为订单条目编号，buycount为购买商品的数量，total为购买此商品的总价，productid为购买商品的编号，name为商品名称，price为商品单价，photo为商品封面，orderid为所属订单编号。
表3-6 订单条目表（orderitem）
名称	类型	长度	允许空	是否为主键	备注
id	int	11	否	是	订单条目编号
buycount	int	11	是	否	购买商品数量
total	float	—	是	否	购买此商品总价
productid	int	11	是	否	购买商品的编号
name	varchar	50	是	否	商品名称
price	float	—	是	否	商品单价
photo	varchar	200	是	否	商品封面
orderid	varchar	50	是	否	所属订单编号
如表3-7所示为订单表，其中orderid为订单id，ordertime为下单时间，status为订单状态，addressname为收货详细地址，postcode为邮编，receiver为收货人，phone为电话号码，totalprice为订单总价，content为备注，vipid为所属会员id。
表3-7 订单表（orders）
名称	类型	长度	允许空	是否为主键	备注
orderid	varchar	50	否	是	订单id
ordertime	datetime	—	是	否	下单时间
status	int	11	是	否	订单状态
addressname	varchar	200	是	否	收货详细地址
postcode	varchar	32	是	否	邮编
receiver	varchar	50	是	否	收货人
phone	varchar	32	是	否	电话号码
totalprice	float	—	是	否	订单总价
content	varchar	400	是	否	备注
vipid	int	11	是	否	所属会员id
如表3-8所示为商品表，其中productid为商品id，name为商品名称，price为实际价格，markprice为市场价格，quality为库存量，hit为浏览量，time为上架时间，photo为封面，content为描述，categoryid为分类id。
表3-8 商品表（product）
名称	类型	长度	允许空	是否为主键	备注
productid	int	11	否	是	商品id
name	varchar	50	是	否	名称
price	float	—	是	否	实际价格
markprice	float	—	是	否	市场价格
quality	int	11	是	否	库存量
hit	int	11	是	否	浏览量
time	date	—	是	否	上架时间
photo	varchar	200	是	否	封面
content	varchar	—	是	否	描述
categoryid	int	11	是	否	分类id
如表3-9所示为省区表，其中id为主键id，provinceid为省区id，province为省区名称。
表3-9 省区表（provinces）
名称	类型	长度	允许空	是否为主键	备注
id	int	11	否	是	主键id
provinceid	varchar	20	是	否	省区id
province	varchar	50	是	否	省区名称
如表3-10所示为用户表，其中vipid为会员id，username为用户名，password为密码，sex为性别，email为邮箱，photo头像，score等级，question密码提示问题，answer答案，lastlogintime上一次登录时间，status是否激活。
表3-10 用户表（users）
名称	类型	长度	允许空	是否为主键	备注
vipid	int	11	否	是	会员id
username	varchar	50	是	否	用户名
password	varchar	50	是	否	密码
sex	varchar	10	是	否	性别
email	varchar	50	是	否	邮箱
photo	varchar	200	是	否	头像
score	bigint	20	是	否	等级
question	varchar	100	是	否	密码提示问题
answer	varchar	100	是	否	答案
lastlogintime	datetime	—	是	否	上一次登录时间
status	tinyint	1	是	否	是否激活

3.4 用例设计
管理员的业务用例图如图3-14所示：

图3-14 管理员的业务用例图
用户的业务用例图如图3-15所示：

图3-15 用户的业务用例图
4 系统实现
4.1后台分类管理
4.1.1 添加分类
在添加分类页面，用户需要填写分类名称和分类排序号，然后点击添加按钮。之后AdminCategoryServlet层的add方法会首先获取改表单的数据，然后验证表单的正确性，判断name是否存在，如果name已经存在，就返回一个提示的错误；反之则将参数传给CategoryService层的add方法，最后调用Dao层，执行sql语句进行添加。添加分类的时序图如图4-1所示：

图4-1 添加分类时序图
4.1.2 删除分类
在删除分类时，用户选择需要删除的数据之后，点击删除按钮。之后AdminCategoryServlet层会先获取要删除数据的id，验证id的正确性，然后将id传到CategoryService层，CategoryService层再调用CategoryDao层让他执行sql语句进行删除，最后AdminCategoryServlet调用本身的findAll方法刷新页面。具体的删除分类时序图如图4-2所示：

图4-2 删除分类的时序图
4.1.3 修改分类
在修改分类时，用户选择要修改的数据之后，点击修改按钮。之后AdminCategoryServlet层会获取要修改数据的id，然后将id传到CategoryService层，CategoryService层再调用CategoryDao层执行sql语句查询出该条数据，再通过AdminCategoryServlet回显到修改页面。在修改页面，用户输入修改后的信息之后，点击确认修改之后。AdminCategoryServlet层会获取修改后的分类对象，然后将对象传到CategoryService层，CategoryService层再调用CategoryDao层执行sql语句修改该条数据，最后调用本类的findAll方法刷新数据跳转页面

图4-3 修改分类的时序图
4.2 后台商品管理
4.2.1 发布商品
在发布商品时，用户点击添加按钮。AdminProductServlet层会调用CategoryService层的findAll方法来获取所有的分类信息，然后再跳转到添加页面，回显到该页面。在添加页面，用户填写选择上传完所有数据之后，点击添加按钮，AdminProductServlet会获取用户所填写的表单数据，然后将数据传到ProductService层，ProductService层再调用ProductDao层，然后执行sql语句进行添加。最后AdminProductServlet会调用本类的findAll方法刷新数据，跳转页面。

4-4 发布商品的时序图
4.2.2 删除商品
在删除商品时，用户选择要删除的商品，点击删除按钮。AdminProductServlet会获取用户选择的id，然后将id传到ProductService层，ProductService调用ProductDao层方法，执行sql语句进行删除。然后AdminProductServlet调用自身的findAll方法进行刷新数据，然后跳转页面。删除商品的时序图如图4-5所示：

4-5 删除商品的时序图
4.2.3 修改商品
当修改商品时，用户选择要修改的商品，然后点击修改。AdminProductServlet会首先获取参数id，然后根据id通过调用ProductService的findById方法读取数据，之后通过调用CategoryService的findAll方法读取所有的分类记录，最后跳转到修改页面。在修改页面，用户修改完数据之后，点击修改按钮。AdminProductServlet会获取表单数据，然后验证表单数据的正确性，然后把数据传入ProductService，ProductService调用ProductDao层的update方法执行sql语句进行修改。最后，AdminProductServlet调用自身的findAll方法刷新数据跳转页面。修改商品的时序图如图4-6所示：

图4-6 删除商品的时序图
4.2.4 查询商品
在查询商品时，当用户选择按照什么查询，输入要查询的数据，点击查询之后，AdminProductServlet会获取当前页码、用户的查询参数skey和svalue，然后调用ProductService层的findAll方法来获取Page对象。ProduceService先调用Dao层的findCount方法来获取所有记录的个数，当记录个数为0时，就不需要读取记录，个数大于0时，调用Dao层的findAll方法进行读取。然后AdminProductServlet返回商品列表页把查到的数据回显出来。查询用户的时序图如图4-7所示：

4-7 查询商品时序图
4.3 前台商品功能模块
4.3.1 商品列表
当用户进入商城首页，ProductServlet会调用Service层的findIndex方法来获取要显示在商城首页的商品列表。Service层再调用Dao层的方法执行sql语句来获取列表，最终将列表返回到ProductServlet，最后将数据显示在页面上。当用户点击更多商品，ProduceServlet通过调用ProductService的findAll方法来获取所有商品个数，如果查询到的商品个数大于0 ，就创建Page对象，读取数据并放入Page中，进行分页展示。商品列表的时序图如图4-8所示：

4-8 商品列表的时序图
4.3.2 商品详情
当用户在商品列表页，点击一个商品时，代表用户要看该商品的详情。这时，ProductServlet会获取到该商品的id，把id传到ProductService中，然后ProductService会调用ProductDao层的fingById方法，执行sql语句，将该条数据读取出来，返回给ProductServlet，最后ProductServlet会跳转页面，并将数据回显给商品详情页。商品详情的时序图如图4-9所示：

图4-9 商品详情的时序图
4.3.3 搜索商品
搜索商品时，用户在输入框输入要查询的商品的名称，然后点击搜索。ProductServlet会获取用户输入的svalue，然后调用ProductService层的findAll来获取数据。ProduceService会先调用Dao层的findCount来获取符合查询条件记录的个数，如果记录个数不为0，就创建一个Page对象，然后调用Dao层的findAll方法根据名称进行分页查询，结果返回一个Page。最后ProductServlet将查询到的数据回显到该页面。搜索商品的时序图如图4-10所示：

4-10 搜索商品的时序图
4.3.4 商品排序
在商品列表中，可以按照价格升序、价格降序、上架时间升序和上架时间降序来排序。其实他们的实现原理和搜索商品的差不多，这里以价格升序为例，当用点击按照价格排序，会给ProductServlet传两个值，一个是sortkey表示按照什么排序，sort表示升序还是降序。这里按照价格升序所以传的两个值分别是sortkey和sort,然后过程和搜索商品时一样，不过调用方法的时候sorykey和sort的值不是空的，然后在Dao层的findAll方法中，会进行判断，由于sortkey和sort的值都不为空，所以sql语句会在拼接的时候加上他们，最终实现排序查询。
4.4 添加购物车
当用户点击加入购物车时，ProductServlet会获取商品的id和购买数量，然后根据Service的findById方法获取商品的信息，然后从session中取出购物车，如果购物车不存在，就创建购物车；如果购物车存在，就继续判断购物车中是否有该商品，如果没有该商品，就将该商品直接放入购物者中，如果有该商品，就从购物车中取出该商品，更新商品的数量。最后跳转到购物车页面。在该页面，用户可以点击+号增加商品数量，和删除购物车中一个商品。
4.5 订单模块
当用户点击结算的时候，会跳转到订单页面。但是跳转页面之前，AddressServlet会首先判断用户是否登录，如果用户未登录就跳转到登录页面，如果登录了，就从session中取出User对象，根据userid调用service中的findAll方法查找该用户的所有记录，包块购物车中的信息、地址信息等。然后重定向到订单页面。在该页面用户选择收货地址就可以提交订单支付了。
4.6 地址模块
在订单模块需要用到地址，在添加地址时需要选择收货地址的省市区，这个系统中的地址是采用的省市区三级联动模式，在数据库中分别存储了省、市和区（县）三张表，然后通过外键将他们联系起来。在当用户点击添加地址时，PCAServlet会通过getProvinces方法调用service层来获取省份列表，然后省份列表封装到JsonArray中返回给页面。当用户选择省区之后，PCAServlet会通过getCities获取省级编号，用同样的方式来获取省区所有的市。县区也是通过这种方式显示在下拉框中的。最后将地址卡中的数据填写完成点击保存按钮。AdderssServlet会先判断用户是否登录，然后获取参数并且验证正确性，之后调用service的add方法添加，最后返回到原页面，并把新地址显示出来。
4.7 添加过滤器
在本系统中还增加了权限过滤和中文乱码过滤。
4.7.1 权限过滤
在商城中，每个人都可以查看商城首页、商品列表，查询商品和查看商品详情，而加入购物车、管理订单、管理地址等操作都是需要登录才能进行的。这时候就要进行验证用户是否登录，而在这些地方都写上验证用户是否登录的代码未免有点麻烦，因此为了一次性验证这些地方的用户登录，加入了权限过滤器。在过滤器中加入验证用户代码，然后通过注解，标记它是用来验证/person文件夹下的所有文件和AddressServlet、OrderServlet两个文件，就可以验证用户执行某些操作时是否登录了。
4.7.2 中文乱码过滤
在本系统中，有很多页面和数据库之间传输数据的操作，在这些传输过程中难免会出现乱码的情况，因此在系统中我加入了中文乱码过滤，旨在预防该项目中的中文乱码问题。这个过滤器的工具类，用的是老师给的，然后我给他设置了一下过滤范围为整个项目的所有文件夹，这样就可以对中文乱码进行过滤了。
4.8 注册后发邮件
在该系统中，用户注册账号之后需要激活才能使用，当用户在注册页面输入所有数据之后,UserServlet会获取表单参数，验证参数的正确性，通过MD5对密码进行加密，然后调用service层的regist方法进行注册，也就是添加一个用户，之后调用service层的addActivate方法存入一个激活码，用来给用户发送激活邮件，然后就是发送激活邮件，当用户在自己的邮箱激活账号之后UserServlet会跳转到登录页面，提示用户可以登录了。如果注册之后没有激活账号，系统会提示未激活，不可登录。用户注册的时序图如图4-11所示：

图4-11 用户注册时序图
当用户注册成功，进行登录时的登录时序图如图4-12所示：

图4-12 用户登录时序图
5系统测试
5.1添加功能测试
这里以添加商品分类为例：当用户在商品添加页面，填写完所有数据之后，点击立即发布按钮，即可实现添加功能，此时页面会弹出添加成功的提示窗。发布商品图如图5-1所示

图5-1 发布商品图
添加成功弹窗图如图5-2所示：

图5-2 商品发布成功图
5.2 删除功能测试
系统中的删除功能有商品、商品分类的删除。这里以删除一个商品为例，用户可以根据需求选择一个或多个商品进行删除，然后点击删除按钮，即可删除一个商品。批量选择商品图如图5-3所示：

5-3 批量选择商品图
商品删除成功弹窗图如图5-4所示：

5-4 删除成功弹窗图
5.3 修改功能测试
在修改页面，用户根据需要可以进行修改商品。修改完成后，点击修改即可完成修改功能。修改页面图如图5-5所示：

图5-5 修改商品页面
当商品被成功修改之后，会弹出修改成功。修改成功弹窗图如图5-6所示：

图5-6 修改成功弹窗图
5.4 查询功能测试
在该系统中，在前台和后台都可以查询商品，这里以后台查询商品为例。这里以查询名称中包含“hauwei”的为例，查询出的结果图如图5-7所示：

5-7 查询结果图
5.5 排序功能测试
在本系统中，可以根据价格和上架时间的升序或者降序进行排序。这里以价格升序为例，按照价格升序之后的商品列表如图5-8所示：

图5-8 商品升序结果图
5.6 注册激活测试
在本系统中，用户可以进行注册，注册时需要填写邮箱，在用户注册之后，需要在邮箱中进行激活才能进行登录。
用户注册图如图5-9所示：

图5-9 用户注册图
用户点击注册后，系统会弹出一个注册成功图。注册成功图如图5-10所示

图5-10 注册成功图
当用以上注册成功后，用户可以在前往邮箱进行激活。激活图如图5-11所示：

激活成功后，会弹出一个激活成功的窗口。激活成功图如图5-12所示：

6 实训总结
这个系统采用的是三层架构。在这个系统中，在后台，可以对商品和商品分类进行管理。在前端，有商品列表的显示、商品详情的展示、购物车管理、订单管理、个人中心和商品排序。虽然实现的功能并不是很多，但是也都是我看视频敲出来的。在这个项目中，我参与了除前端框架以外的所有工作。
从刚开始的连接数据库，到JDBCUtils类的封装，再到商品后台管理的实现，最后到前台各项功能的实现。在这些过程中我学会了很多以前不懂的知识，也渐渐对三层架构的项目更加熟悉。
在这次课设中我也遇到过很多问题，比如在商城前端搜索商品名称，搜索出来是乱码的，后来加了中文过滤器，才解决了这个问题。再比如进入商城首页显示500错误，经过验证我发现是因为我电脑中mysql服务器总是不自动开启，虽然我给他设置了自动开启服务，所以此时只要把mysql服务打开就行了。
在这次课设中，我遇到了很多问题，也学会了很多东西，让我获益匪浅，对我来说是一个令人深刻的项目实训。


7 参考文献
1、明日科技主编，《java web从入门到精通》，清华大学出版社，2012年
2、贾蓓主编，《java web整合开发实战》，清华大学出版社，2013年
